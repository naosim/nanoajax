var nanoJsonp=function(params){params.data=params.data||{};var computedUrl=function(p){return p.url+(p.url.indexOf("?")<0?"?":"&")+objectToURI(p.data)},objectToURI=function(obj){var data=[];for(var key in obj)data.push(encodeURIComponent(key)+"="+encodeURIComponent(obj[key]));return data.join("&")},done=!1,callback=params.data.callback="jsonp_"+Math.random().toString(36)[2]+"_"+Date.now(),removeCallback=function(){try{delete this[callback]}catch(_error){this[callback]=void 0}};this[callback]=function(data){params.success(data),removeCallback()};var s=document.createElement("script");s.src=computedUrl(params),s.async=!0,s.onerror=function(evt){params.error(evt),removeCallback()},s.onload=s.onreadystatechange=function(){done||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(done=!0,s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),s=null)};var h=document.querySelector("head")||document.documentElement;h.insertBefore(s,h.firstChild)};